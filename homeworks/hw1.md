Question: 我们有时候使用12306网站去买票的会遇到一个现象，页面上一直看到还有票，但是去下单购票的时候，又提示没有票了，对于这个功能我们想一下： a) 系统在一致性和可用性上面是如何取舍的？ b) 为什么要这么设计，会不会存在什么问题?



Answer: 显然对于12306而言，由于流量较大，所以一定是按照分布式的方式来架构整个系统，对于存储车票信息的服务器，也一定有多台，所以需要考虑一致性、可用性、容错性。对于第一个现象，可能是因为你看到的页面是数秒之前从服务器获得的数据，那时候票没有买完，但是这个数据同步更新的过程中其他人将车票买完，所以下单购票会失败，这说明在一致性和可用性上，12306更注重高可用，而使得系统损失了一定的一致性。如果不这样设计，可能会导致数据在更新时其他人无法下单（即使在有票的情况下），导致更差的用户体验。